name: WTH Azure infrastructure
run-name: ${{ github.actor }} infrastructure provision

on: 
    workflow_dispatch:

jobs:
    infrastructure:
        name: azure infrastructure
        runs-on: ubuntu-latest
        steps:
          - name: Checkout code
            uses: actions/checkout@v3.5.2    
          - name: Azure Login
            uses: Azure/login@v1
            with:
              creds: ${{ secrets.AZURE_CREDENTIALS }}
          - name: Check variable
            run: echo ${{  vars.AZURE_RG_WTH  }}
          - name: Azure Deploy
            uses: azure/arm-deploy@v1
            with:
              resourceGroupName: ${{ vars.AZURE_RG_WTH }}
              template: ./ARM-Templates/container-webapp-template.json
